import{d as D,P as ne,u as P,s as k,c,o as a,a as f,b as l,n as I,Z as T,_ as B,e as oe,t as U,f as O,F as L,r as z,g as W,S as ae,h as R,p as F,i as V,C as Z,j as A,O as le,T as J,k as X,l as Q,m as ce,q as j,v as ie,B as re}from"./index-1f95dee7.js";const _e=["id"],fe=D({__name:"PlaceComp",props:{place:{type:ne,default:null},hidden:{type:Boolean,default:!1},corner:{type:Boolean,default:!1}},setup(s){const e=s,n=P(),{altar:p,getSelectedOfferings:g,getHeldOffering:i}=k(n),y=c(()=>e.place?e.place.getID():""),v=c(()=>{var t;return(t=p.value)==null?void 0:t.getOpenPlaces().includes(e.place)}),d=c(()=>g.value.length&&v.value),_=c(()=>e.place.zone===T.Limbo),h=c(()=>e.place.zone===T.Player);function $(){if(e.place.type==="omen"||e.place.zone!==T.Altar)return;const t=i.value;t&&n.pushOfferingAtPlace(e.place,t.direction)}function C(t){e.place.type==="omen"||e.place.zone!==T.Altar||(n.resetOfferings(),t.preventDefault())}function E(t){t.dataTransfer&&(t.dataTransfer.dropEffect="link"),t.preventDefault()}function b(t){e.place.type==="omen"||e.place.zone!==T.Altar||(n.dropOffering(e.place),t.preventDefault())}return(t,u)=>{var o;return a(),f("div",{id:y.value,class:I(["place",[(o=e.place)==null?void 0:o.type,s.hidden?"invisible":"",s.corner?"corner":"",d.value?"enabled":"",_.value?"inlimbo":"",h.value?"inplayer":""]])},[l("div",{class:"spacing",onDragenter:$,onDragleave:C,onDragover:E,onDrop:b},null,32)],10,_e)}}});const G=B(fe,[["__scopeId","data-v-f28acc1b"]]),ge=s=>(F("data-v-94726e1e"),s=s(),V(),s),ue=ge(()=>l("br",null,null,-1)),de=D({__name:"PlayerComp",props:{player:{type:oe,default:null}},setup(s){const e=s,n=P(),{getCurrentPlayerTurn:p}=k(n),g=c(()=>e.player?e.player.getRows():[]),i=c(()=>e.player.turn&&p.value);return(y,v)=>s.player?(a(),f("div",{key:0,class:I(["player flex-column-center",i.value?"turn":""])},[l("h2",null,U(O(ae).player)+" "+U(s.player.id),1),ue,l("div",{class:I(O(n).rotate?"flex-row-spaced":"flex-column-spaced")},[(a(!0),f(L,null,z(g.value,(d,_)=>(a(),f("div",{key:_,class:I(O(n).rotate?"flex-column-spaced":"flex-row-spaced")},[(a(!0),f(L,null,z(d,(h,$)=>(a(),R(G,{key:$,place:h},null,8,["place"]))),128))],2))),128))],2)],2)):W("",!0)}});const q=B(de,[["__scopeId","data-v-94726e1e"]]),pe="/assets/reset-ca5973ed.svg",me="/assets/done-63a685b3.svg",ee=s=>(F("data-v-77f3f4ad"),s=s(),V(),s),ve={class:"limbo flex-column-center"},be={class:"flex-row-center"},ye={class:"flex-row-center buttons"},he=ee(()=>l("img",{src:pe,alt:"reset"},null,-1)),$e=[he],xe=ee(()=>l("img",{src:me,alt:"done"},null,-1)),Oe=[xe],Ie=D({__name:"LimboComp",setup(s){const e=P(),{limbo:n,getLimboOfferings:p}=k(e),g=c(()=>{var d;return(d=n.value)==null?void 0:d.getRow()}),i=c(()=>p.value.length>0);function y(){i.value&&e.undoPlacements()}function v(){i.value&&e.palmOfferings()}return(d,_)=>(a(),f("div",ve,[l("div",be,[(a(!0),f(L,null,z(g.value,(h,$)=>(a(),R(G,{key:$,place:h},null,8,["place"]))),128))]),l("div",ye,[l("button",{class:I([i.value?"shadowed enabled":"disabled"]),onClick:y},$e,2),l("button",{class:I([i.value?"shadowed enabled":"disabled"]),onClick:v},Oe,2)])]))}});const Ce=B(Ie,[["__scopeId","data-v-77f3f4ad"]]),we={class:"flex-row-center"},De={class:"flex-column-center"},Pe={class:"altar flex-column-center shadow"},ke=D({__name:"AltarComp",setup(s){const e=P(),{altar:n}=k(e),p=c(()=>{var g;return(g=n.value)==null?void 0:g.getRows()});return(g,i)=>(a(),f("div",we,[l("div",De,[l("div",Pe,[(a(!0),f(L,null,z(p.value,(y,v)=>(a(),f("div",{key:v,class:"flex-row-center"},[(a(!0),f(L,null,z(y,(d,_)=>(a(),R(G,{key:_,place:d,corner:(v===0||v===O(Z).altarSize-1)&&(_===0||_===O(Z).altarSize-1),hidden:""},null,8,["place","corner"]))),128))]))),128))])])]))}});const Be=B(ke,[["__scopeId","data-v-c755bb3b"]]),Ee=s=>(F("data-v-d983ee8c"),s=s(),V(),s),Ae={class:"kitty flex-column-center shadow"},Se=Ee(()=>l("div",{class:"spacing"},null,-1)),Te=D({__name:"KittyComp",setup(s){const e=P(),{kitty:n}=k(e);return(p,g)=>{var i;return a(),f("div",Ae,[Se,A(G,{place:(i=O(n))==null?void 0:i.place,hidden:""},null,8,["place"])])}}});const Le=B(Te,[["__scopeId","data-v-d983ee8c"]]),ze="/assets/11-fabe0405.png",Me="/assets/12-3cf8e2ab.png",Re="/assets/13-8257758d.png",Fe="/assets/14-57ec94eb.png",Ve="/assets/21-0ee2c953.png",He="/assets/22-886470d6.png",Ge="/assets/23-03cfa18c.png",Xe="/assets/24-cc251532.png",Ye="/assets/31-def237dc.png",Ke="/assets/32-9efe663d.png",Ne="/assets/33-8f8ea4f7.png",Ue="/assets/34-7c1afc5b.png",Ze="/assets/41-0b26d785.png",je="/assets/42-a824f74a.png",qe="/assets/43-465307d6.png",We="/assets/44-7ac05cfb.png",Je=["id"],Qe=["id"],es=D({__name:"OmenComp",props:{omen:{type:le,default:null}},setup(s){const e=s,n=P(),{getAltarActiveOmens:p,turn:g}=k(n),i=c(()=>e.omen?e.omen.getID():""),y=c(()=>n.playerForID(e.omen.player)),v=c(()=>n.getPlayerFortunes(e.omen.player)),d=c(()=>p.value.includes(e.omen)),_=c(()=>d.value&&g.value===J.Collect),h=c(()=>{var b;return y.value&&!((b=y.value)!=null&&b.turn)}),$=c(()=>v.value.find(b=>b.includes(e.omen)));X(()=>{Q(()=>{C()})});function C(){const b=document.getElementById(`style-${e.omen.getID()}`);if(!b)return;const t=`${e.omen.celestial}${e.omen.sacrifice}`,u=new URL(Object.assign({"../assets/images/omens/11.png":ze,"../assets/images/omens/12.png":Me,"../assets/images/omens/13.png":Re,"../assets/images/omens/14.png":Fe,"../assets/images/omens/21.png":Ve,"../assets/images/omens/22.png":He,"../assets/images/omens/23.png":Ge,"../assets/images/omens/24.png":Xe,"../assets/images/omens/31.png":Ye,"../assets/images/omens/32.png":Ke,"../assets/images/omens/33.png":Ne,"../assets/images/omens/34.png":Ue,"../assets/images/omens/41.png":Ze,"../assets/images/omens/42.png":je,"../assets/images/omens/43.png":qe,"../assets/images/omens/44.png":We})[`../assets/images/omens/${t}.png`],self.location).href;b.style.backgroundImage=`url(${u})`}function E(){_.value&&n.selectOmen(e.omen)}return(b,t)=>(a(),f("div",{id:i.value,class:I(["container shadow flex-column-center",[$.value?"fortune":"",_.value?"events":""]])},[l("div",{class:I(["omen",d.value?"active":"",_.value?"enabled":"",h.value?"disabled":""]),onClick:E},[l("div",{id:`style-${i.value}`,class:"icon"},null,8,Qe)],2)],10,Je))}});const ss=B(es,[["__scopeId","data-v-83f206c0"]]),ts="/assets/11-461f6737.png",ns="/assets/12-9ab4812f.png",os="/assets/13-5e2b2069.png",as="/assets/14-b76ea213.png",ls="/assets/21-c2aa472a.png",cs="/assets/22-8d6ff469.png",is="/assets/23-e994e76f.png",rs="/assets/24-8dd44e66.png",_s="/assets/31-740a3fab.png",fs="/assets/32-25b8eb1c.png",gs="/assets/33-df12b272.png",us="/assets/34-f4a1c50b.png",ds="/assets/41-967a0aaf.png",ps="/assets/42-6d441022.png",ms="/assets/43-11b99e1a.png",vs="/assets/44-a29e51e7.png",bs="/assets/flame-e9cdbf27.gif",ys=s=>(F("data-v-b8094051"),s=s(),V(),s),hs=["id"],$s=["id"],xs={key:0,class:"flame"},Os=ys(()=>l("img",{src:bs,alt:"burning"},null,-1)),Is=[Os],Cs=D({__name:"OfferingComp",props:{offering:{type:ce,default:null},tilted:{type:Boolean,defaut:!1}},setup(s){const e=s,n=P(),{getAltarOfferingPlaces:p,getAltarPortentOfferings:g,getEnabledOfferings:i,getDisabledOfferings:y,getBurnableOfferings:v,getCurrentPlayerOfferings:d}=k(n),_=c(()=>e.offering?e.offering.getID():""),h=c(()=>g.value.includes(e.offering)),$=c(()=>i.value.includes(e.offering)),C=c(()=>y.value.includes(e.offering)),E=c(()=>v.value.includes(e.offering)),b=c(()=>h.value&&!E.value);X(()=>{Q(()=>{t()})});function t(){const m=document.getElementById(`style-${e.offering.getID()}`);if(!m)return;const M=`${e.offering.celestial}${e.offering.sacrifice}`,Y=new URL(Object.assign({"../assets/images/offerings/front/11.png":ts,"../assets/images/offerings/front/12.png":ns,"../assets/images/offerings/front/13.png":os,"../assets/images/offerings/front/14.png":as,"../assets/images/offerings/front/21.png":ls,"../assets/images/offerings/front/22.png":cs,"../assets/images/offerings/front/23.png":is,"../assets/images/offerings/front/24.png":rs,"../assets/images/offerings/front/31.png":_s,"../assets/images/offerings/front/32.png":fs,"../assets/images/offerings/front/33.png":gs,"../assets/images/offerings/front/34.png":us,"../assets/images/offerings/front/41.png":ds,"../assets/images/offerings/front/42.png":ps,"../assets/images/offerings/front/43.png":ms,"../assets/images/offerings/front/44.png":vs})[`../assets/images/offerings/front/${M}.png`],self.location).href;m.style.backgroundImage=`url(${Y})`}function u(){C.value||$.value&&n.selectOffering(e.offering)}function o(){return!(n.turn!==J.Replace||e.offering.zone!==T.Player||!d.value.includes(e.offering))}let r=new j,x="";function w(){if(!o())return;const m=document.getElementById(`${e.offering.getID()}`);m&&(r.setX(m.offsetLeft),r.setY(m.offsetTop),x=m.style.transform,e.offering.setHolding(!0))}function S(){if(!o())return;const m=document.getElementById(`${e.offering.getID()}`);if(!m)return;const M=new j(m.center().x,m.center().y);m.style.top=`${r.y}px`,m.style.left=`${r.x}px`,m.style.transform=x,n.resetOfferings();const H=p.value.find(te=>{var N;return(N=document.getElementById(`${te.getID()}`))==null?void 0:N.containsPoint(M.x,M.y)}),K=e.offering||null;H&&n.pushOfferingAtPlace(H,K.direction),H&&n.dropOffering(H),K.setHolding(!1)}return(m,M)=>(a(),f("div",{id:_.value,class:I(["container shadow flex-column-center",$.value?"events":""])},[l("div",{class:I(["offering",[b.value?"active":"",$.value?"enabled":"",C.value?"disabled":"",E.value?"burner":"",s.offering.burning?"burning":""]]),onClick:u,onTouchstart:w,onMousedown:w,onTouchend:S,onMouseup:S},[l("div",{id:`style-${_.value}`,class:"icon"},null,8,$s),s.offering.burning?(a(),f("div",xs,Is)):W("",!0)],34)],10,hs))}});const ws=B(Cs,[["__scopeId","data-v-b8094051"]]),Ds=D({__name:"TilesComp",setup(s){const e=P(),{omens:n,offerings:p,getAltarOfferingPlaces:g,getHeldOffering:i}=k(e);function y(t){const u=t.touches[0];u&&d(u.clientX,u.clientY)}function v(t){d(t.clientX,t.clientY)}function d(t,u){const o=i.value||null;if(!o||o.zone!==T.Player||!o.holding)return;const r=document.getElementById(`${o.getID()}`);if(!r)return;const x=u-r.offsetHeight/2,w=t-r.offsetWidth/2;r.style.transition="all 0s ease 0s",r.style.transform="rotate(0) translate(0, 0)",r.style.top=`${x}px`,r.style.left=`${w}px`;const S=o.direction;E(t,u),o.direction!==S&&e.resetOfferings(),b()}let _=0,h=0,$=5,C=0;function E(t,u){if(C++,C>$)C=0;else return;const o=i.value||null;if(o){if(_&&h){const r=t-_,x=u-h;Math.abs(r)>Math.abs(x)?o.setDirection(r>0?2:4):o.setDirection(x>0?3:1)}_=t,h=u}}function b(){const t=i.value||null;if(!t)return;const u=document.getElementById(`${t.getID()}`);if(!u)return;const o=u.center(),r=g.value.filter(x=>{var S;const w=((S=document.getElementById(x.getID()))==null?void 0:S.getBoundingClientRect())||new DOMRect;return!(o.x<w.left||o.x>w.right||o.y<w.top||o.y>w.bottom)});g.value.filter(x=>r.includes(x)).forEach(x=>e.pushOfferingAtPlace(x,t.direction))}return(t,u)=>(a(),f("div",{class:"tiles",onTouchmove:y,onMousemove:v},[(a(!0),f(L,null,z(O(n),(o,r)=>(a(),R(ss,{key:r,omen:o},null,8,["omen"]))),128)),(a(!0),f(L,null,z(O(p),(o,r)=>(a(),R(ws,{key:r,offering:o},null,8,["offering"]))),128))],32))}});const Ps=B(Ds,[["__scopeId","data-v-f553f4ce"]]),se=s=>(F("data-v-57633583"),s=s(),V(),s),ks=se(()=>l("div",null,null,-1)),Bs={class:"flex-column-center"},Es={class:"flex-column-center"},As={class:"flex-column-center"},Ss=se(()=>l("div",null,null,-1)),Ts=D({__name:"GameView",setup(s){const e=P(),{players:n,getCurrentPlayerTurn:p}=k(e);return X(()=>{e.gameStart()}),ie(()=>{e.gameEnd()}),(g,i)=>(a(),f("main",{class:I(O(p)?"":"waiting")},[A(re),l("div",{class:I(["window-height",O(e).rotate?"flex-column-spaced":"flex-row-spaced"])},[ks,l("div",Bs,[A(Le),A(q,{player:O(n)[0]},null,8,["player"])]),l("div",Es,[A(Be)]),l("div",As,[A(Ce),A(q,{player:O(n)[1]},null,8,["player"])]),Ss],2),A(Ps)],2))}});const zs=B(Ts,[["__scopeId","data-v-57633583"]]);export{zs as default};
