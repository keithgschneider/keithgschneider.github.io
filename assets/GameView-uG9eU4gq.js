import{d as E,P as ke,u as B,s as R,c as a,o as c,a as x,b as s,n as v,Z as M,_ as T,e as we,t as J,F as U,r as H,f as u,g as G,h as P,T as N,p as Y,i as K,C as ie,D as j,j as me,w as W,S as se,M as ve,k as V,l as xe,m as re,q as I,O as Ce,v as te,x as Oe,y as ce,L as De,z as Ie,A as ge,B as Pe,E as _e,G as fe}from"./index-_OMP9sXa.js";const Ee=["id"],Be=E({__name:"PlaceComp",props:{place:{type:ke,default:null},hidden:{type:Boolean,default:!1},corner:{type:Boolean,default:!1}},setup(n){const e=n,o=B(),{altar:l,getSelectedOfferings:i,getHeldOffering:p}=R(o),f=a(()=>e.place?e.place.getID():""),r=a(()=>{var t;return(t=l.value)==null?void 0:t.getOpenPlaces().includes(e.place)}),d=a(()=>i.value.length&&r.value),b=a(()=>{var t;return((t=e.place)==null?void 0:t.zone)===M.Limbo}),w=a(()=>{var t;return((t=e.place)==null?void 0:t.zone)===M.Player});function C(){if(e.place.type==="omen"||e.place.zone!==M.Altar)return;const t=p.value;t&&o.pushOfferingAtPlace(e.place,t.direction)}function O(t){e.place.type==="omen"||e.place.zone!==M.Altar||(o.resetOfferings(),t.preventDefault())}function g(t){t.dataTransfer&&(t.dataTransfer.dropEffect="link"),t.preventDefault()}function m(t){e.place.type==="omen"||e.place.zone!==M.Altar||(o.dropOffering(e.place),t.preventDefault())}return(t,D)=>{var _;return c(),x("div",{id:f.value,class:v(["place",[(_=e.place)==null?void 0:_.type,n.hidden?"invisible":"",n.corner?"corner":"",d.value?"enabled":"",b.value?"inlimbo":"",w.value?"inplayer":""]])},[s("div",{class:"spacing",onDragenter:C,onDragleave:O,onDragover:g,onDrop:m},null,32)],10,Ee)}}}),q=T(Be,[["__scopeId","data-v-de2bf2ec"]]),Re=E({__name:"PlayerComp",props:{player:{type:we,default:null}},setup(n){const e=n,o=B(),{getCurrentPlayer:l}=R(o),i=a(()=>e.player?e.player.getRows():[]),p=a(()=>{var f;return e.player.turn&&((f=l.value)==null?void 0:f.turn)});return(f,r)=>n.player?(c(),x("div",{key:0,class:v(["player flex-column-center",p.value?"turn":""])},[s("h2",null,J(n.player.name),1),s("div",{class:v(u(o).rotate?"flex-row-spaced":"flex-column-spaced")},[(c(!0),x(U,null,H(i.value,(d,b)=>(c(),x("div",{key:b,class:v(u(o).rotate?"flex-column-spaced":"flex-row-spaced")},[(c(!0),x(U,null,H(d,(w,C)=>(c(),P(q,{key:C,place:w},null,8,["place"]))),128))],2))),128))],2)],2)):G("",!0)}}),ue=T(Re,[["__scopeId","data-v-3c3cfa98"]]),Se="/assets/reset-QS3pQvj9.svg",Le="/assets/done-Pp_cZSFL.svg",be=n=>(Y("data-v-4087ca2f"),n=n(),K(),n),Ae={class:"container"},Me={class:"flex-row-center"},Te={class:"flex-row-center buttons"},ze=be(()=>s("img",{src:Se,alt:"reset"},null,-1)),Xe=[ze],Ue=be(()=>s("img",{src:Le,alt:"done"},null,-1)),He=[Ue],Fe=E({__name:"LimboComp",setup(n){const e=B(),{limbo:o,getLimboOfferings:l,turn:i}=R(e),p=a(()=>{var w;return(w=o.value)==null?void 0:w.getRow()}),f=a(()=>i.value===N.Replace),r=a(()=>l.value.length>0);function d(){r.value&&e.undoPlacements()}function b(){r.value&&e.checkPalmPortentValidity()&&e.palmOfferings()}return(w,C)=>(c(),x("div",Ae,[s("div",{class:v(["limbo flex-column-center",f.value?"forward":""])},[s("div",Me,[(c(!0),x(U,null,H(p.value,(O,g)=>(c(),P(q,{key:g,place:O},null,8,["place"]))),128))]),s("div",Te,[s("button",{class:v([r.value?"shadowed enabled":"disabled"]),onClick:d},Xe,2),s("button",{class:v([r.value?"shadowed enabled":"disabled"]),onClick:b},He,2)])],2)]))}}),pe=T(Fe,[["__scopeId","data-v-4087ca2f"]]),Ge={id:"altar",class:"flex-row-center"},Ve={class:"flex-column-center"},Qe={class:"altar flex-column-center shadow"},je=E({__name:"AltarComp",setup(n){const e=B(),{altar:o,getLeftDirectionEnabled:l,getRightDirectionEnabled:i,getUpDirectionEnabled:p,getDownDirectionEnabled:f,getHeldOffering:r}=R(e),d=a(()=>{var g;return(g=o.value)==null?void 0:g.getRows()}),b=a(()=>{var g,m;return((g=r.value)==null?void 0:g.overlaps)&&!i.value&&((m=r.value)==null?void 0:m.direction)===j.Right}),w=a(()=>{var g,m;return((g=r.value)==null?void 0:g.overlaps)&&!l.value&&((m=r.value)==null?void 0:m.direction)===j.Left}),C=a(()=>{var g,m;return((g=r.value)==null?void 0:g.overlaps)&&!p.value&&((m=r.value)==null?void 0:m.direction)===j.Up}),O=a(()=>{var g,m;return((g=r.value)==null?void 0:g.overlaps)&&!f.value&&((m=r.value)==null?void 0:m.direction)===j.Down});return(g,m)=>(c(),x("div",Ge,[s("div",{class:v(["dir left",u(i)?"":"invisible"])},null,2),s("div",{class:v(["dir right",u(l)?"":"invisible"])},null,2),s("div",{class:v(["dir top",u(f)?"":"invisible"])},null,2),s("div",{class:v(["dir bottom",u(p)?"":"invisible"])},null,2),s("div",{class:v(["dir left error",b.value?"":"invisible"])},null,2),s("div",{class:v(["dir right error",w.value?"":"invisible"])},null,2),s("div",{class:v(["dir top error",O.value?"":"invisible"])},null,2),s("div",{class:v(["dir bottom error",C.value?"":"invisible"])},null,2),s("div",Ve,[s("div",Qe,[(c(!0),x(U,null,H(d.value,(t,D)=>(c(),x("div",{key:D,class:"flex-row-center"},[(c(!0),x(U,null,H(t,(_,y)=>(c(),P(q,{key:y,place:_,corner:(D===0||D===u(ie).altarSize-1)&&(y===0||y===u(ie).altarSize-1),hidden:""},null,8,["place","corner"]))),128))]))),128))])])]))}}),Je=T(je,[["__scopeId","data-v-ebc75a86"]]),Ne="/assets/menu-3kKS-J5S.svg",We={class:"menu flex-column-center"},Ye=E({__name:"OptionsComp",props:{open:{type:Boolean,default:!1}},emits:["close"],setup(n,{emit:e}){const o=n,l=B(),i=me(),p=e;function f(){l.gameEnd(),V(()=>{l.gameClear(),V(()=>{i.back()})})}function r(){l.openSettings()}return(d,b)=>(c(),P(ve,{show:o.open,class:"shadow",backdrop:"",closable:"",onClose:b[0]||(b[0]=w=>p("close"))},{default:W(()=>[s("div",We,[s("button",{class:"enabled",onClick:f},J(u(se).menu.main),1),s("button",{class:"enabled",onClick:r},J(u(se).menu.settings),1)])]),_:1},8,["show"]))}}),he=n=>(Y("data-v-582ba6b7"),n=n(),K(),n),Ke=he(()=>s("img",{src:Ne,alt:"menu"},null,-1)),qe=[Ke],Ze={class:"kitty flex-column-center shadow"},es=he(()=>s("div",{class:"spacing"},null,-1)),ss=E({__name:"KittyComp",props:{right:{type:Boolean,default:!1}},setup(n){const e=B(),{kitty:o}=R(e),l=n;let i=xe(!1);return(p,f)=>{var r;return c(),x("div",null,[s("div",{class:v(["buttons",l.right?"right":""])},[s("div",{class:"menu shadowed enabled",onClick:f[0]||(f[0]=d=>re(i)?i.value=!0:i=!0)},qe)],2),s("div",Ze,[es,I(q,{place:(r=u(o))==null?void 0:r.place,hidden:""},null,8,["place"])]),I(Ye,{open:u(i),onClose:f[1]||(f[1]=d=>re(i)?i.value=!1:i=!1)},null,8,["open"])])}}}),de=T(ss,[["__scopeId","data-v-582ba6b7"]]),ts="/assets/11-NJPxLyoa.png",ns="/assets/12-CfXSVcf1.png",os="/assets/13-XMG33C0I.png",as="/assets/14-j1eu2XVo.png",ls="/assets/21-YqRH41BS.png",is="/assets/22-u8dY1_CV.png",rs="/assets/23-VMmZfpid.png",cs="/assets/24-b6nAXjQs.png",gs="/assets/31-7-l8RFXE.png",_s="/assets/32-J9jDeiGp.png",fs="/assets/33-B23Ml4lQ.png",us="/assets/34-RvWlkMuR.png",ps="/assets/41-JPooxIlS.png",ds="/assets/42-KoP27kTz.png",ms="/assets/43-1ZGhISDg.png",vs="/assets/44-UGrs3pOH.png",bs=["id"],hs=["id"],ys=E({__name:"OmenComp",props:{omen:{type:Ce,default:null}},setup(n){const e=n,o=B(),{turn:l,getAltarActiveOmens:i,getBurnableOfferings:p}=R(o),f=a(()=>e.omen?e.omen.getID():""),r=a(()=>o.playerForID(e.omen.player)),d=a(()=>o.getPlayerFortunes(e.omen.player)),b=a(()=>i.value.includes(e.omen)),w=a(()=>{var t;return r.value&&!((t=r.value)!=null&&t.turn)}),C=a(()=>d.value.find(t=>t.includes(e.omen))),O=a(()=>{var t;return(t=p.value)==null?void 0:t.length}),g=a(()=>e.omen.zone!==M.Altar&&l.value===N.Swap);te(()=>{V(()=>{m()})});function m(){const t=document.getElementById(`style-${e.omen.getID()}`);if(!t)return;const D=`${e.omen.celestial}${e.omen.sacrifice}`,_=new URL(Object.assign({"../assets/images/omens/11.png":ts,"../assets/images/omens/12.png":ns,"../assets/images/omens/13.png":os,"../assets/images/omens/14.png":as,"../assets/images/omens/21.png":ls,"../assets/images/omens/22.png":is,"../assets/images/omens/23.png":rs,"../assets/images/omens/24.png":cs,"../assets/images/omens/31.png":gs,"../assets/images/omens/32.png":_s,"../assets/images/omens/33.png":fs,"../assets/images/omens/34.png":us,"../assets/images/omens/41.png":ps,"../assets/images/omens/42.png":ds,"../assets/images/omens/43.png":ms,"../assets/images/omens/44.png":vs})[`../assets/images/omens/${D}.png`],import.meta.url).href;t.style.backgroundImage=`url(${_})`}return(t,D)=>(c(),x("div",{id:f.value,class:v(["container shadow flex-column-center",[C.value&&!w.value?"fortune":""]])},[s("div",{class:v(["omen",b.value?"active":"",w.value?"disabled":"",O.value?"dim":"",g.value?"hiding":""])},[s("div",{id:`style-${f.value}`,class:"icon"},null,8,hs)],2)],10,bs))}}),$s=T(ys,[["__scopeId","data-v-545de1ef"]]),ks="/assets/11-M2nKxzvA.png",ws="/assets/12-mdXThV6s.png",xs="/assets/13-d8ryGPaR.png",Cs="/assets/14-_D06QzqX.png",Os="/assets/21-x5F6RfHH.png",Ds="/assets/22-sC2-UXdi.png",Is="/assets/23-0LeUXBfR.png",Ps="/assets/24-OQE-Qxu6.png",Es="/assets/31-fMTQ-doG.png",Bs="/assets/32-Qg-oePU0.png",Rs="/assets/33-RfFmE6fa.png",Ss="/assets/34-Xj3kIC8R.png",Ls="/assets/41-6tbvLLfx.png",As="/assets/42-GHHC5tLY.png",Ms="/assets/43-qClxOrGe.png",Ts="/assets/44-I_MTyjed.png",zs="/assets/11-hGoQsRy9.png",Xs="/assets/12-J0WstXsu.png",Us="/assets/13-0fWxsmL7.png",Hs="/assets/14-Cd5tUgik.png",Fs="/assets/21-Xc-5m5l9.png",Gs="/assets/22-KnJvq5du.png",Vs="/assets/23-Jn9zdviX.png",Qs="/assets/24-4rhRwUu1.png",js="/assets/31-zFFUdyF5.png",Js="/assets/32-oWMsE9TN.png",Ns="/assets/33-yfbdAkhz.png",Ws="/assets/34-VkPENV3X.png",Ys="/assets/41-iBEPi-MW.png",Ks="/assets/42-7vN2xxUJ.png",qs="/assets/43-97nLAfl-.png",Zs="/assets/44-vhl3hxlM.png",ye=n=>(Y("data-v-2eeede42"),n=n(),K(),n),et=["id"],st=["id"],tt=ye(()=>s("div",{class:"icon front"},null,-1)),nt=ye(()=>s("div",{class:"icon back"},null,-1)),ot=[tt,nt],at=E({__name:"OfferingComp",props:{offering:{type:Oe,default:null},tilted:{type:Boolean,defaut:!1}},setup(n){const e=n,o=B(),{turn:l,getAltarOfferingPlaces:i,getAltarPortentOfferings:p,getEnabledOfferings:f,getDisabledOfferings:r,getBurnableOfferings:d,getPlacedOfferings:b,getCurrentPlayerOfferings:w}=R(o),C=a(()=>e.offering?e.offering.getID():""),O=a(()=>p.value.includes(e.offering)),g=a(()=>f.value.includes(e.offering)),m=a(()=>r.value.includes(e.offering)),t=a(()=>d.value.includes(e.offering)),D=a(()=>e.offering.burning),_=a(()=>b.value.includes(e.offering)),y=a(()=>O.value&&!t.value),h=a(()=>{var k;return(k=d.value)==null?void 0:k.length}),$=a(()=>e.offering.zone!==M.Altar&&l.value===N.Swap);te(()=>{V(()=>{S()})});function S(){const k=document.getElementById(`style-${e.offering.getID()}`);if(!k)return;const F=k.children[0],ae=k.children[1],X=`${e.offering.celestial}${e.offering.sacrifice}`,Q=new URL(Object.assign({"../assets/images/offerings/front/11.png":ks,"../assets/images/offerings/front/12.png":ws,"../assets/images/offerings/front/13.png":xs,"../assets/images/offerings/front/14.png":Cs,"../assets/images/offerings/front/21.png":Os,"../assets/images/offerings/front/22.png":Ds,"../assets/images/offerings/front/23.png":Is,"../assets/images/offerings/front/24.png":Ps,"../assets/images/offerings/front/31.png":Es,"../assets/images/offerings/front/32.png":Bs,"../assets/images/offerings/front/33.png":Rs,"../assets/images/offerings/front/34.png":Ss,"../assets/images/offerings/front/41.png":Ls,"../assets/images/offerings/front/42.png":As,"../assets/images/offerings/front/43.png":Ms,"../assets/images/offerings/front/44.png":Ts})[`../assets/images/offerings/front/${X}.png`],import.meta.url).href;F.style.backgroundImage=`url(${Q})`;const ee=new URL(Object.assign({"../assets/images/offerings/back/11.png":zs,"../assets/images/offerings/back/12.png":Xs,"../assets/images/offerings/back/13.png":Us,"../assets/images/offerings/back/14.png":Hs,"../assets/images/offerings/back/21.png":Fs,"../assets/images/offerings/back/22.png":Gs,"../assets/images/offerings/back/23.png":Vs,"../assets/images/offerings/back/24.png":Qs,"../assets/images/offerings/back/31.png":js,"../assets/images/offerings/back/32.png":Js,"../assets/images/offerings/back/33.png":Ns,"../assets/images/offerings/back/34.png":Ws,"../assets/images/offerings/back/41.png":Ys,"../assets/images/offerings/back/42.png":Ks,"../assets/images/offerings/back/43.png":qs,"../assets/images/offerings/back/44.png":Zs})[`../assets/images/offerings/back/${X}.png`],import.meta.url).href;ae.style.backgroundImage=`url(${ee})`}function L(){m.value||g.value&&o.selectOffering(e.offering)}function A(){return!(o.turn!==N.Replace||e.offering.zone!==M.Player||!w.value.includes(e.offering))}let z=new ce,ne="";function oe(){if(e.offering.holding||!A())return;const k=document.getElementById(`${e.offering.getID()}`);k&&(z.setX(k.offsetLeft),z.setY(k.offsetTop),ne=k.style.transform,e.offering.setHolding(!0))}function Z(){if(!A())return;const k=document.getElementById(`${e.offering.getID()}`);if(!k)return;const F=new ce(k.center().x,k.center().y);k.style.top=`${z.y}px`,k.style.left=`${z.x}px`,k.style.transform=ne,o.resetOfferings();const X=i.value.find(ee=>{var le;return(le=document.getElementById(`${ee.getID()}`))==null?void 0:le.containsPoint(F.x,F.y)}),Q=e.offering||null;X&&o.pushOfferingAtPlace(X,Q.direction),X&&o.dropOffering(X),Q.setHolding(!1)}return(k,F)=>(c(),x("div",{id:C.value,class:v(["container shadow flex-column-center",[g.value?"events":"",n.offering.holding?"holding":"",$.value?"hiding":""]])},[s("div",{class:v(["offering",[_.value?"placed":"",y.value?"active":"",g.value?"enabled":"",m.value?"disabled":"",t.value?"burner":"",D.value?"burning":"",h.value?"dim":""]]),onClick:L,onTouchstart:oe,onMousedown:oe,onTouchend:Z,onMouseup:Z,onTouchcancel:Z},[s("div",{id:`style-${C.value}`,class:"token"},ot,8,st)],34)],10,et))}}),lt=T(at,[["__scopeId","data-v-2eeede42"]]),it=E({__name:"TilesComp",setup(n){const e=B(),{omens:o,offerings:l,getAltarOfferingPlaces:i,getHeldOffering:p,getBurnableOfferings:f}=R(e),r=a(()=>{var _;return(_=f.value)==null?void 0:_.length});function d(_){const y=_.touches[0];y&&w(y.clientX,y.clientY)}function b(_){w(_.clientX,_.clientY)}function w(_,y){const h=p.value||null;if(!h||h.zone!==M.Player||!h.holding)return;const $=document.getElementById(`${h.getID()}`);if(!$)return;const S=y-$.offsetHeight/2,L=_-$.offsetWidth/2;$.style.transition="translate 0s ease 0s",$.style.transform="translate(0, 0)",$.style.top=`${S}px`,$.style.left=`${L}px`;const A=h.direction;t(_,y),h.direction!==A&&e.resetOfferings(),D()}let C=0,O=0,g=5,m=0;function t(_,y){if(m++,m>g)m=0;else return;const h=p.value||null;if(h){if(C&&O){const $=_-C,S=y-O;Math.abs($)>Math.abs(S)?h.setDirection($>0?2:4):h.setDirection(S>0?3:1)}C=_,O=y}}function D(){var S;const _=p.value||null;if(!_)return;const y=document.getElementById(`${_.getID()}`);if(!y)return;const h=y.center(),$=i.value.filter(L=>{var z;const A=((z=document.getElementById(L.getID()))==null?void 0:z.getBoundingClientRect())||new DOMRect;return!(h.x<A.left||h.x>A.right||h.y<A.top||h.y>A.bottom)});(S=p.value)==null||S.setOverlaps($.length>0),i.value.filter(L=>$.includes(L)).forEach(L=>e.pushOfferingAtPlace(L,_.direction))}return(_,y)=>(c(),x("div",{class:v(["tiles",r.value?"dim":""]),onTouchmove:d,onMousemove:b},[(c(!0),x(U,null,H(u(o),(h,$)=>(c(),P($s,{key:$,omen:h},null,8,["omen"]))),128)),(c(!0),x(U,null,H(u(l),(h,$)=>(c(),P(lt,{key:$,offering:h},null,8,["offering"]))),128))],34))}}),rt=T(it,[["__scopeId","data-v-c247ead8"]]),ct={class:"menu flex-column-center"},gt=E({__name:"WaitingComp",setup(n){const e=B(),{multiplayer:o,getLocalPlayer:l,getCurrentPlayer:i}=R(e),p=a(()=>!!o.value&&l.value!==i.value);return(f,r)=>(c(),P(ve,{show:p.value,class:"shadow",backdrop:""},{default:W(()=>[s("div",ct,[I(De),s("p",null,J(u(se).online.waiting),1)])]),_:1},8,["show"]))}}),$e=n=>(Y("data-v-8aa22175"),n=n(),K(),n),_t=$e(()=>s("div",null,null,-1)),ft={class:"flex-column-spaced full-height"},ut={class:"flex-column-spaced full-height"},pt={class:"flex-column-spaced full-height"},dt=$e(()=>s("div",null,null,-1)),mt=E({__name:"GameView",setup(n){const e=me(),o=B(),{players:l,getCurrentPlayer:i,getCurrentPlayerTurn:p}=R(o);return te(()=>{l.value.length?V(()=>o.gameStart()):e.back()}),Ie(()=>{o.gameEnd()}),(f,r)=>(c(),x("main",{class:v(u(p)?"":"waiting")},[I(Pe),s("div",{class:v(["window-height",u(o).rotate?"flex-column-spaced":"flex-row-spaced"])},[_t,I(ge,{name:"slide-right"},{default:W(()=>{var d,b;return[_e(s("div",ft,[(d=u(l)[1])!=null&&d.turn?(c(),P(de,{key:0})):G("",!0),I(ue,{player:u(l)[0]},null,8,["player"]),(b=u(l)[0])!=null&&b.turn?(c(),P(pe,{key:1})):G("",!0)],512),[[fe,u(i)]])]}),_:1}),s("div",ut,[I(Je)]),I(ge,{name:"slide-left"},{default:W(()=>{var d,b;return[_e(s("div",pt,[(d=u(l)[0])!=null&&d.turn?(c(),P(de,{key:0,right:""})):G("",!0),I(ue,{player:u(l)[1]},null,8,["player"]),(b=u(l)[1])!=null&&b.turn?(c(),P(pe,{key:1})):G("",!0)],512),[[fe,u(i)]])]}),_:1}),dt],2),I(rt),I(gt)],2))}}),bt=T(mt,[["__scopeId","data-v-8aa22175"]]);export{bt as default};
