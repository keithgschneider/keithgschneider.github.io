import{d as k,P as te,u as B,s as E,c as l,o,a as c,b as g,n as P,Z as M,_ as A,e as ne,f as j,t as S,g as I,F as z,r as R,h as oe,S as U,i as F,C as X,p as H,j as G,k as T,O as ae,T as W,l as Y,m as J,q as le,v as Z,w as ce,B as ie}from"./index-70fa5f61.js";const re="/assets/reset-57391f15.svg",_e="/assets/done-8714b5cc.svg",fe=["id"],ge=k({__name:"PlaceComp",props:{place:{type:te,default:null},hidden:{type:Boolean,default:!1},corner:{type:Boolean,default:!1}},setup(s){const e=s,n=B(),{altar:m,getSelectedOfferings:f,getHeldOffering:d}=E(n),b=l(()=>e.place?e.place.getID():""),v=l(()=>{var t;return(t=m.value)==null?void 0:t.getOpenPlaces().includes(e.place)}),$=l(()=>f.value.length&&v.value),p=l(()=>{var t;return((t=e.place)==null?void 0:t.zone)!==M.Altar});function O(){if(e.place.type==="omen"||e.place.zone!==M.Altar)return;const t=d.value;t&&n.pushOfferingAtPlace(e.place,t.direction)}function h(t){e.place.type==="omen"||e.place.zone!==M.Altar||(n.resetOfferings(),t.preventDefault())}function x(t){t.dataTransfer&&(t.dataTransfer.dropEffect="link"),t.preventDefault()}function C(t){e.place.type==="omen"||e.place.zone!==M.Altar||(n.dropOffering(e.place),t.preventDefault())}return(t,i)=>{var r;return o(),c("div",{id:b.value,class:P(["place",[(r=e.place)==null?void 0:r.type,s.hidden?"invisible":"",s.corner?"corner":"",$.value?"enabled":"",p.value?"spread":""]])},[g("div",{class:"spacing",onDragenter:O,onDragleave:h,onDragover:x,onDrop:C},null,32)],10,fe)}}});const N=A(ge,[["__scopeId","data-v-9b7cef24"]]),Q=s=>(H("data-v-2b205085"),s=s(),G(),s),ue={class:"flex-row-spaced full-width"},de=["disabled"],pe=Q(()=>g("img",{src:re,alt:"reset"},null,-1)),me=[pe],ve={class:"full-width"},ye=["disabled"],be=Q(()=>g("img",{src:_e,alt:"done"},null,-1)),he=[be],$e={key:0},Oe={key:1},xe={class:"digits"},Ie=k({__name:"PlayerComp",props:{player:{type:ne,default:null}},setup(s){const e=s,n=B(),{getTurnPhaseString:m,getCurrentPlayerTurn:f,getLimboOfferings:d}=E(n),b=l(()=>e.player?e.player.getRows():[]),v=l(()=>n.getPlayerFortunes(e.player.id)),$=X.fortuneMajor,p=l(()=>v.value.find(t=>t.length===$)),O=l(()=>e.player.turn&&f.value),h=l(()=>d.value.length>0);function x(){n.undoPlacements()}function C(){n.palmOfferings()}return(t,i)=>s.player?(o(),c("div",{key:0,class:P(["player flex-column-center",O.value?"turn":""])},[g("div",ue,[O.value?(o(),c("button",{key:0,class:P([h.value?"shadowed enabled":"disabled"]),disabled:!h.value,onClick:x},me,10,de)):j("",!0),g("h2",ve,S(I(U).player)+" "+S(s.player.id),1),O.value?(o(),c("button",{key:1,class:P([h.value?"shadowed enabled":"disabled"]),disabled:!h.value,onClick:C},he,10,ye)):j("",!0)]),s.player.turn?(o(),c("h3",$e,S(I(m)),1)):(o(),c("h3",Oe,S(I(U).waiting),1)),(o(!0),c(z,null,R(b.value,(r,a)=>(o(),c("div",{key:a,class:"flex-row-center"},[(o(!0),c(z,null,R(r,(_,y)=>(o(),F(N,{key:y,place:_,hidden:a===0},null,8,["place","hidden"]))),128))]))),128)),g("h3",null,[oe(S(I(U).fortunes.toUpperCase())+": ",1),g("span",xe,S(v.value.length)+S(p.value?"*":""),1)])],2)):j("",!0)}});const q=A(Ie,[["__scopeId","data-v-2b205085"]]),Ce={class:"limbo flex-column-center"},we={class:"flex-row-center"},De=k({__name:"LimboComp",setup(s){const e=B(),{limbo:n}=E(e),m=l(()=>{var f;return(f=n.value)==null?void 0:f.getRow()});return(f,d)=>(o(),c("div",Ce,[g("div",we,[(o(!0),c(z,null,R(m.value,(b,v)=>(o(),F(N,{key:v,place:b,hidden:""},null,8,["place"]))),128))])]))}}),Pe={class:"flex-row-center"},ke={class:"flex-column-center"},Be={class:"altar flex-column-center shadow"},Ee=k({__name:"AltarComp",setup(s){const e=B(),{altar:n}=E(e),m=l(()=>{var f;return(f=n.value)==null?void 0:f.getRows()});return(f,d)=>(o(),c("div",Pe,[g("div",ke,[g("div",Be,[(o(!0),c(z,null,R(m.value,(b,v)=>(o(),c("div",{key:v,class:"flex-row-center"},[(o(!0),c(z,null,R(b,($,p)=>(o(),F(N,{key:p,place:$,corner:(v===0||v===I(X).altarSize-1)&&(p===0||p===I(X).altarSize-1),hidden:""},null,8,["place","corner"]))),128))]))),128))])])]))}});const Te=A(Ee,[["__scopeId","data-v-9f2ee722"]]),Ae=s=>(H("data-v-cb5325e4"),s=s(),G(),s),Se={class:"kitty flex-column-center shadow"},Me=Ae(()=>g("div",{class:"spacing"},null,-1)),ze=k({__name:"KittyComp",setup(s){const e=B(),{kitty:n}=E(e);return(m,f)=>{var d;return o(),c("div",Se,[Me,T(N,{place:(d=I(n))==null?void 0:d.place,hidden:""},null,8,["place"])])}}});const Re=A(ze,[["__scopeId","data-v-cb5325e4"]]),Fe="/assets/11-fabe0405.png",Le="/assets/12-3cf8e2ab.png",Ve="/assets/13-8257758d.png",je="/assets/14-57ec94eb.png",He="/assets/21-0ee2c953.png",Ge="/assets/22-886470d6.png",Ne="/assets/23-03cfa18c.png",Ue="/assets/24-cc251532.png",Xe="/assets/31-def237dc.png",Ye="/assets/32-9efe663d.png",Ke="/assets/33-8f8ea4f7.png",Ze="/assets/34-7c1afc5b.png",qe="/assets/41-0b26d785.png",We="/assets/42-a824f74a.png",Je="/assets/43-465307d6.png",Qe="/assets/44-7ac05cfb.png",es=["id"],ss=["id"],ts=k({__name:"OmenComp",props:{omen:{type:ae,default:null}},setup(s){const e=s,n=B(),{getAltarActiveOmens:m,turn:f}=E(n),d=l(()=>e.omen?e.omen.getID():""),b=l(()=>n.playerForID(e.omen.player)),v=l(()=>n.getPlayerFortunes(e.omen.player)),$=l(()=>m.value.includes(e.omen)),p=l(()=>$.value&&f.value===W.Collect),O=l(()=>{var t;return b.value&&!((t=b.value)!=null&&t.turn)}),h=l(()=>v.value.find(t=>t.includes(e.omen)));Y(()=>{J(()=>{x()})});function x(){const t=document.getElementById(`style-${e.omen.getID()}`);if(!t)return;const i=`${e.omen.celestial}${e.omen.sacrifice}`,r=new URL(Object.assign({"../assets/images/omens/11.png":Fe,"../assets/images/omens/12.png":Le,"../assets/images/omens/13.png":Ve,"../assets/images/omens/14.png":je,"../assets/images/omens/21.png":He,"../assets/images/omens/22.png":Ge,"../assets/images/omens/23.png":Ne,"../assets/images/omens/24.png":Ue,"../assets/images/omens/31.png":Xe,"../assets/images/omens/32.png":Ye,"../assets/images/omens/33.png":Ke,"../assets/images/omens/34.png":Ze,"../assets/images/omens/41.png":qe,"../assets/images/omens/42.png":We,"../assets/images/omens/43.png":Je,"../assets/images/omens/44.png":Qe})[`../assets/images/omens/${i}.png`],self.location).href;t.style.backgroundImage=`url(${r})`}function C(){p.value&&n.selectOmen(e.omen)}return(t,i)=>(o(),c("div",{id:d.value,class:P(["container shadow flex-column-center",[h.value?"fortune":"",p.value?"events":""]])},[g("div",{class:P(["omen",$.value?"active":"",p.value?"enabled":"",O.value?"disabled":""]),onClick:C},[g("div",{id:`style-${d.value}`,class:"icon"},null,8,ss)],2)],10,es))}});const ns=A(ts,[["__scopeId","data-v-3284dc00"]]),os="/assets/11-461f6737.png",as="/assets/12-9ab4812f.png",ls="/assets/13-5e2b2069.png",cs="/assets/14-b76ea213.png",is="/assets/21-c2aa472a.png",rs="/assets/22-8d6ff469.png",_s="/assets/23-e994e76f.png",fs="/assets/24-8dd44e66.png",gs="/assets/31-740a3fab.png",us="/assets/32-25b8eb1c.png",ds="/assets/33-df12b272.png",ps="/assets/34-f4a1c50b.png",ms="/assets/41-967a0aaf.png",vs="/assets/42-6d441022.png",ys="/assets/43-11b99e1a.png",bs="/assets/44-a29e51e7.png",hs="/assets/flame-e9cdbf27.gif",$s=s=>(H("data-v-9f68db4e"),s=s(),G(),s),Os=["id"],xs=["id"],Is={key:0,class:"flame"},Cs=$s(()=>g("img",{src:hs,alt:"burning"},null,-1)),ws=[Cs],Ds=k({__name:"OfferingComp",props:{offering:{type:le,default:null},tilted:{type:Boolean,defaut:!1}},setup(s){const e=s,n=B(),{getAltarOfferingPlaces:m,getAltarPortentOfferings:f,getEnabledOfferings:d,getDisabledOfferings:b,getBurnableOfferings:v,getCurrentPlayerOfferings:$}=E(n),p=l(()=>e.offering?e.offering.getID():""),O=l(()=>f.value.includes(e.offering)),h=l(()=>d.value.includes(e.offering)),x=l(()=>b.value.includes(e.offering)),C=l(()=>v.value.includes(e.offering)),t=l(()=>O.value&&!C.value);Y(()=>{J(()=>{i()})});function i(){const u=document.getElementById(`style-${e.offering.getID()}`);if(!u)return;const D=`${e.offering.celestial}${e.offering.sacrifice}`,L=new URL(Object.assign({"../assets/images/offerings/front/11.png":os,"../assets/images/offerings/front/12.png":as,"../assets/images/offerings/front/13.png":ls,"../assets/images/offerings/front/14.png":cs,"../assets/images/offerings/front/21.png":is,"../assets/images/offerings/front/22.png":rs,"../assets/images/offerings/front/23.png":_s,"../assets/images/offerings/front/24.png":fs,"../assets/images/offerings/front/31.png":gs,"../assets/images/offerings/front/32.png":us,"../assets/images/offerings/front/33.png":ds,"../assets/images/offerings/front/34.png":ps,"../assets/images/offerings/front/41.png":ms,"../assets/images/offerings/front/42.png":vs,"../assets/images/offerings/front/43.png":ys,"../assets/images/offerings/front/44.png":bs})[`../assets/images/offerings/front/${D}.png`],self.location).href;u.style.backgroundImage=`url(${L})`}function r(){x.value||h.value&&n.selectOffering(e.offering)}let a=new Z,_="";function y(){if(n.turn!==W.Replace||e.offering.zone!==M.Player||!$.value.includes(e.offering))return;const u=document.getElementById(`${e.offering.getID()}`);u&&(a.setX(u.offsetLeft),a.setY(u.offsetTop),_=u.style.transform,e.offering.setHolding(!0))}function w(){const u=e.offering||null;if(!u||u.zone!==M.Player)return;const D=document.getElementById(`${u.getID()}`);if(!D)return;const L=new Z(D.center().x,D.center().y);D.style.top=`${a.y}px`,D.style.left=`${a.x}px`,D.style.transform=_,n.resetOfferings();const V=m.value.find(se=>{var K;return(K=document.getElementById(`${se.getID()}`))==null?void 0:K.containsPoint(L.x,L.y)});V&&n.pushOfferingAtPlace(V,u.direction),V&&n.dropOffering(V),u.setHolding(!1)}return(u,D)=>(o(),c("div",{id:p.value,class:P(["container shadow flex-column-center",h.value?"events":""])},[g("div",{class:P(["offering",[t.value?"active":"",h.value?"enabled":"",x.value?"disabled":"",C.value?"burner":"",s.offering.burning?"burning":""]]),onClick:r,onTouchstart:y,onMousedown:y,onTouchend:w,onMouseup:w},[g("div",{id:`style-${p.value}`,class:"icon"},null,8,xs),s.offering.burning?(o(),c("div",Is,ws)):j("",!0)],34)],10,Os))}});const Ps=A(Ds,[["__scopeId","data-v-9f68db4e"]]),ks=k({__name:"TilesComp",setup(s){const e=B(),{omens:n,offerings:m,getAltarOfferingPlaces:f,getHeldOffering:d}=E(e);function b(i){const r=i.touches[0];r&&$(r.clientX,r.clientY)}function v(i){$(i.clientX,i.clientY)}function $(i,r){const a=d.value||null;if(!a||a.zone!==M.Player||!a.holding)return;const _=document.getElementById(`${a.getID()}`);if(!_)return;const y=r-_.offsetHeight/2,w=i-_.offsetWidth/2;_.style.transition="all 0s ease 0s",_.style.transform="rotate(0) translate(0, 0)",_.style.top=`${y}px`,_.style.left=`${w}px`;const u=a.direction;C(i,r),a.direction!==u&&e.resetOfferings(),t()}let p=0,O=0,h=5,x=0;function C(i,r){if(x++,x>h)x=0;else return;const a=d.value||null;if(a){if(p&&O){const _=i-p,y=r-O;Math.abs(_)>Math.abs(y)?a.setDirection(_>0?2:4):a.setDirection(y>0?3:1)}p=i,O=r}}function t(){const i=d.value||null;if(!i)return;const r=document.getElementById(`${i.getID()}`);if(!r)return;const a=r.center(),_=f.value.filter(y=>{var u;const w=((u=document.getElementById(y.getID()))==null?void 0:u.getBoundingClientRect())||new DOMRect;return!(a.x<w.left||a.x>w.right||a.y<w.top||a.y>w.bottom)});f.value.filter(y=>_.includes(y)).forEach(y=>e.pushOfferingAtPlace(y,i.direction))}return(i,r)=>(o(),c("div",{class:"tiles",onTouchmove:b,onMousemove:v},[(o(!0),c(z,null,R(I(n),(a,_)=>(o(),F(ns,{key:_,omen:a},null,8,["omen"]))),128)),(o(!0),c(z,null,R(I(m),(a,_)=>(o(),F(Ps,{key:_,offering:a},null,8,["offering"]))),128))],32))}});const Bs=A(ks,[["__scopeId","data-v-f553f4ce"]]),ee=s=>(H("data-v-3dfd360e"),s=s(),G(),s),Es={class:"flex-row-spaced window-height"},Ts=ee(()=>g("div",null,null,-1)),As={class:"flex-column-spaced"},Ss=ee(()=>g("div",null,null,-1)),Ms=k({__name:"GameView",setup(s){const e=B(),{players:n,getCurrentPlayerTurn:m}=E(e);return Y(()=>{e.gameStart()}),ce(()=>{e.gameEnd()}),(f,d)=>(o(),c("main",{class:P(I(m)?"":"waiting")},[T(ie,{bg:"game.jpeg"}),g("div",Es,[Ts,T(q,{player:I(n)[0]},null,8,["player"]),g("div",As,[T(De),T(Te),T(Re)]),T(q,{player:I(n)[1]},null,8,["player"]),Ss]),T(Bs)],2))}});const Fs=A(Ms,[["__scopeId","data-v-3dfd360e"]]);export{Fs as default};
